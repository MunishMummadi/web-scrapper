{{ define "content" }}
<div class="dashboard">
    <h1 class="page-title">Dashboard</h1>
    
    <div class="stats-grid" id="dashboard-stats">
        <div class="stat-card">
            <div class="stat-title">Total Pages Scraped</div>
            <div class="stat-value" id="total-urls-stat">{{ .Stats.TotalUrls }}</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                <span>12% vs last week</span>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-title">URLs in Queue</div>
            <div class="stat-value" id="queued-urls-stat">{{ .Stats.QueuedUrls }}</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                <span>5% vs yesterday</span>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-title">Crawl Rate (URLs/min)</div>
            <div class="stat-value" id="crawl-rate-stat">{{ .Stats.CrawlRate }}</div>
            <div class="stat-change negative">
                <i class="fas fa-arrow-down"></i>
                <span>3% vs avg</span>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-title">Error Rate</div>
            <div class="stat-value" id="error-rate-stat">{{ .Stats.ErrorRate }}%</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-down"></i>
                <span>2% vs yesterday</span>
            </div>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">Quick Actions</h2>
        </div>
        <div class="card-body">
            <form id="url-form" class="form-inline">
                <div class="form-group" style="display: flex; gap: 0.5rem;">
                    <input type="url" id="url-input" placeholder="Enter URL to scrape" class="form-input" style="flex: 1;">
                    <button type="submit" id="url-submit" class="btn btn-primary">Scrape URL</button>
                </div>
                <div id="status-message" class="form-message"></div>
            </form>
        </div>
    </div>
    
    <div class="row" style="display: flex; gap: 1.5rem; flex-wrap: wrap;">
        <div class="card" style="flex: 1; min-width: 300px;">
            <div class="card-header">
                <h2 class="card-title">Scraping Activity</h2>
            </div>
            <div class="card-body">
                <div class="chart-container">
                    <canvas id="scraping-activity-chart"></canvas>
                </div>
            </div>
        </div>
        
        <div class="card" style="flex: 1; min-width: 300px;">
            <div class="card-header">
                <h2 class="card-title">Domain Distribution</h2>
            </div>
            <div class="card-body">
                <div class="chart-container">
                    <canvas id="domain-distribution-chart"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">Performance Metrics</h2>
        </div>
        <div class="card-body">
            <div class="chart-container">
                <canvas id="performance-chart"></canvas>
            </div>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">Recent Scraped Pages</h2>
            <a href="/view/data" class="btn btn-outline">View All</a>
        </div>
        <div class="card-body">
            <div class="table-container">
                <table id="recent-pages-table">
                    <thead>
                        <tr>
                            <th>URL</th>
                            <th>Scraped At</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{ range .RecentPages }}
                        <tr>
                            <td class="table-url">
                                <a href="{{ .URL }}" target="_blank" title="{{ .URL }}">{{ .URL }}</a>
                            </td>
                            <td>{{ .ScrapedAt.Format "Jan 02, 2006 15:04:05" }}</td>
                            <td>
                                <span class="badge badge-success">Success</span>
                            </td>
                        </tr>
                        {{ else }}
                        <tr>
                            <td colspan="3" style="text-align: center;">No pages have been scraped yet.</td>
                        </tr>
                        {{ end }}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{{ end }}
